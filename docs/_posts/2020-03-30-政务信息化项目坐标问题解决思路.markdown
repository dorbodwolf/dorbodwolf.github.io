
政府信息化项目中经常会遇到一些来自政府部门的奇奇怪怪的数据。在文昌市资源环境监测监管大数据服务平台项目中，我们接触的部门包括自然资源与规划局、水务局、生态环境局等等，这些部门常常会有各自的业务数据使用习惯。  

这些部门中自然资源与规划局涉及空间矢量数据较多一些。涉及多规合一的数据由于较新，数据格式一般为shapefile或者esri personal geodatabsse。坐标系统基本是大地2000的坐标，但是也要分三种类型：1）大地2000的经纬度，epsg代码是`4490`；2）大地2000高斯克吕格6度带投影坐标系，包含文昌市在内的分带的epsg代码是`4508`；3）大地2000高斯克吕格3度带投影，包含文昌市在哪的分带的epsg代码是`4525`.此外，还会涉及一些地块勘界类的数据，这类数据往往采用Adobe autocad格式，坐标系统基本也是前述的几个类型。  

尽管这些年来有关部门的数据服务水平有所提高，但是拿到手的数据往往还是存在各种不明确的问题，需要我们去分析问题来对数据进行转换以满足我们的业务需求，下面以一个实际的案例来例证这个解决问题的过程。  

我们的目标是将数据的坐标转成经纬度格式，拿到手的数据加载入GIS软件中可以看到基本信息，包括坐标参照系统CRS的信息。  
+ 1. 文件名和文件存放路径；  
+ 2. 文件格式，这里显示的是ESRI Shapefile；  
+ 3. Encoding，属性表的编码格式，这里是汉字内码扩展规范，称GBK，全名为《汉字内码扩展规范(GBK)》1.0版，由中华人民共和国全国信息技术标准化技术委员会1995年12月1日制订，国家技术监督局标准化司和电子工业部科技与质量监督司1995年12月15日联合以《技术标函[1995]229号》文件的形式公布。 GBK共收录21886个汉字和图形符号，其中汉字（包括部首和构件）21003个，图形符号883个。  
+ 4. Geometry，几何体类型，这里显示我们的数据是POLYGON格式的MULTIPOLGYGON格式。  
+ 5. CRS，坐标参照系统，未定义。  
+ 6. Extent，图形范围，这里可以看出来是比较大的数字，猜测是米为单位的投影坐标系（平面坐标系），而非度为单位的地理坐标系。    
+ 7. Unit，单位，未定义，猜测为米。  
+ 8. Feature count，2，显示有两个要素，这和我们在图形范围内看到的内容一样。  
![数据探查](https://i.ibb.co/Cm9g1J6/1.png)

有了这个信息，再加上被告知这是大地2000坐标系，我们可以初步假设这个数据是EPSG代码是`4525`或者`4508`的坐标系，在这个基础上可以分别尝试也能实现坐标转换，但是最好还是进一步获取详细的信息，下图是更加直观的信息，从下图可以获取以下信息：  
+ 1. 投影坐标系是`CGCS2000_GK_CM_111E`  
+ 2. 投影方式是`Guass Kruger`  
+ 3. 线性单位是`米`  
![数据探查](https://i.ibb.co/xs0G5M1/2.jpg)
有了这个信息问题就简单了，我们解决问题的步骤是：1）给数据添加坐标；2）坐标转换。在常用GIS软件或者工具中都可以办到。这里推荐一个网站：epsg.io，可以查看所有坐标系统的基本信息和对应的epsg code对应关系，方便在gis软件中检索坐标系统。  
添加坐标系示例如下：  
![数据探查](https://i.ibb.co/HgdPt1J/3.png)
坐标转换示例如下：  
![数据探查](https://i.ibb.co/qrBfzgV/4.png)

以上就是解决问题的一个思路和流程，希望可以给大家带来一些启发。  


## 附录

[坐标系参数和椭球体发展总结表格](https://docs.qq.com/doc/DRkdxcllKdVpyRFB5)




